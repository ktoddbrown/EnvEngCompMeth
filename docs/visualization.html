<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6 Visualization | Computational Methods for Environmental Engineers - Course Notes</title>
  <meta name="description" content="6 Visualization | Computational Methods for Environmental Engineers - Course Notes" />
  <meta name="generator" content="bookdown 0.17 and GitBook 2.6.7" />

  <meta property="og:title" content="6 Visualization | Computational Methods for Environmental Engineers - Course Notes" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6 Visualization | Computational Methods for Environmental Engineers - Course Notes" />
  
  
  

<meta name="author" content="K Todd-Brown (ktoddbrown@ufl.edu)" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-cleanning.html"/>

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Why do we care about computational methods?</a><ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#other-references"><i class="fa fa-check"></i><b>0.1</b> Other references</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="r-and-rstudio-set-up.html"><a href="r-and-rstudio-set-up.html"><i class="fa fa-check"></i><b>1</b> R and RStudio set up</a><ul>
<li class="chapter" data-level="1.1" data-path="r-and-rstudio-set-up.html"><a href="r-and-rstudio-set-up.html#windows-install"><i class="fa fa-check"></i><b>1.1</b> Windows install</a></li>
<li class="chapter" data-level="1.2" data-path="r-and-rstudio-set-up.html"><a href="r-and-rstudio-set-up.html#macos-install"><i class="fa fa-check"></i><b>1.2</b> macOS install</a></li>
<li class="chapter" data-level="1.3" data-path="r-and-rstudio-set-up.html"><a href="r-and-rstudio-set-up.html#linux"><i class="fa fa-check"></i><b>1.3</b> Linux</a></li>
<li class="chapter" data-level="1.4" data-path="r-and-rstudio-set-up.html"><a href="r-and-rstudio-set-up.html#r-libraries"><i class="fa fa-check"></i><b>1.4</b> R libraries</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="folder-organization.html"><a href="folder-organization.html"><i class="fa fa-check"></i><b>2</b> Folder organization</a></li>
<li class="chapter" data-level="3" data-path="basic-programming-in-r.html"><a href="basic-programming-in-r.html"><i class="fa fa-check"></i><b>3</b> Basic programming in R</a><ul>
<li class="chapter" data-level="3.1" data-path="basic-programming-in-r.html"><a href="basic-programming-in-r.html#r-console-r-scripts-and-rmarkdown"><i class="fa fa-check"></i><b>3.1</b> R console, R-scripts, and Rmarkdown</a></li>
<li class="chapter" data-level="3.2" data-path="basic-programming-in-r.html"><a href="basic-programming-in-r.html#data-types"><i class="fa fa-check"></i><b>3.2</b> Data types</a><ul>
<li class="chapter" data-level="3.2.1" data-path="basic-programming-in-r.html"><a href="basic-programming-in-r.html#logical-data-types"><i class="fa fa-check"></i><b>3.2.1</b> Logical data types</a></li>
<li class="chapter" data-level="3.2.2" data-path="basic-programming-in-r.html"><a href="basic-programming-in-r.html#numerical-data-types"><i class="fa fa-check"></i><b>3.2.2</b> Numerical data types</a></li>
<li class="chapter" data-level="3.2.3" data-path="basic-programming-in-r.html"><a href="basic-programming-in-r.html#characters"><i class="fa fa-check"></i><b>3.2.3</b> Characters</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="basic-programming-in-r.html"><a href="basic-programming-in-r.html#notation"><i class="fa fa-check"></i><b>3.3</b> Notation</a><ul>
<li class="chapter" data-level="3.3.1" data-path="basic-programming-in-r.html"><a href="basic-programming-in-r.html#sect_infix"><i class="fa fa-check"></i><b>3.3.1</b> Infix notation</a></li>
<li class="chapter" data-level="3.3.2" data-path="basic-programming-in-r.html"><a href="basic-programming-in-r.html#postfix-notation"><i class="fa fa-check"></i><b>3.3.2</b> Postfix notation</a></li>
<li class="chapter" data-level="3.3.3" data-path="basic-programming-in-r.html"><a href="basic-programming-in-r.html#prefix-notation"><i class="fa fa-check"></i><b>3.3.3</b> Prefix notation</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="basic-programming-in-r.html"><a href="basic-programming-in-r.html#variables"><i class="fa fa-check"></i><b>3.4</b> Variables</a><ul>
<li class="chapter" data-level="3.4.1" data-path="basic-programming-in-r.html"><a href="basic-programming-in-r.html#a-brief-history-of-the-assignment-operator"><i class="fa fa-check"></i><b>3.4.1</b> A brief history of the assignment operator</a></li>
<li class="chapter" data-level="3.4.2" data-path="basic-programming-in-r.html"><a href="basic-programming-in-r.html#factors"><i class="fa fa-check"></i><b>3.4.2</b> Factors</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="basic-programming-in-r.html"><a href="basic-programming-in-r.html#data-structures"><i class="fa fa-check"></i><b>3.5</b> Data structures</a><ul>
<li class="chapter" data-level="3.5.1" data-path="basic-programming-in-r.html"><a href="basic-programming-in-r.html#arrays"><i class="fa fa-check"></i><b>3.5.1</b> Arrays</a></li>
<li class="chapter" data-level="3.5.2" data-path="basic-programming-in-r.html"><a href="basic-programming-in-r.html#lists"><i class="fa fa-check"></i><b>3.5.2</b> Lists</a></li>
<li class="chapter" data-level="3.5.3" data-path="basic-programming-in-r.html"><a href="basic-programming-in-r.html#data.frame"><i class="fa fa-check"></i><b>3.5.3</b> data.frame</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="basic-programming-in-r.html"><a href="basic-programming-in-r.html#indexing"><i class="fa fa-check"></i><b>3.6</b> Indexing</a><ul>
<li class="chapter" data-level="3.6.1" data-path="basic-programming-in-r.html"><a href="basic-programming-in-r.html#named-reference"><i class="fa fa-check"></i><b>3.6.1</b> Named reference</a></li>
<li class="chapter" data-level="3.6.2" data-path="basic-programming-in-r.html"><a href="basic-programming-in-r.html#square-breaket-notation"><i class="fa fa-check"></i><b>3.6.2</b> Square breaket notation</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="basic-programming-in-r.html"><a href="basic-programming-in-r.html#functions"><i class="fa fa-check"></i><b>3.7</b> Functions</a><ul>
<li class="chapter" data-level="3.7.1" data-path="basic-programming-in-r.html"><a href="basic-programming-in-r.html#developing-a-function"><i class="fa fa-check"></i><b>3.7.1</b> Developing a function</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="style-guide.html"><a href="style-guide.html"><i class="fa fa-check"></i><b>4</b> Style Guide</a><ul>
<li class="chapter" data-level="4.1" data-path="style-guide.html"><a href="style-guide.html#file-names"><i class="fa fa-check"></i><b>4.1</b> File names</a></li>
<li class="chapter" data-level="4.2" data-path="style-guide.html"><a href="style-guide.html#variable-and-function-names"><i class="fa fa-check"></i><b>4.2</b> Variable and function names</a></li>
<li class="chapter" data-level="4.3" data-path="style-guide.html"><a href="style-guide.html#comments"><i class="fa fa-check"></i><b>4.3</b> Comments</a></li>
<li class="chapter" data-level="4.4" data-path="style-guide.html"><a href="style-guide.html#functions-1"><i class="fa fa-check"></i><b>4.4</b> Functions</a></li>
<li class="chapter" data-level="4.5" data-path="style-guide.html"><a href="style-guide.html#indentation"><i class="fa fa-check"></i><b>4.5</b> Indentation</a></li>
<li class="chapter" data-level="4.6" data-path="style-guide.html"><a href="style-guide.html#line-breaks"><i class="fa fa-check"></i><b>4.6</b> Line breaks</a></li>
<li class="chapter" data-level="4.7" data-path="style-guide.html"><a href="style-guide.html#whitespace"><i class="fa fa-check"></i><b>4.7</b> Whitespace</a></li>
<li class="chapter" data-level="4.8" data-path="style-guide.html"><a href="style-guide.html#rmarkdown-documents"><i class="fa fa-check"></i><b>4.8</b> Rmarkdown documents</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data-cleanning.html"><a href="data-cleanning.html"><i class="fa fa-check"></i><b>5</b> Data cleanning</a><ul>
<li class="chapter" data-level="5.1" data-path="data-cleanning.html"><a href="data-cleanning.html#file-formats"><i class="fa fa-check"></i><b>5.1</b> File formats</a><ul>
<li class="chapter" data-level="5.1.1" data-path="data-cleanning.html"><a href="data-cleanning.html#excel-files"><i class="fa fa-check"></i><b>5.1.1</b> Excel files</a></li>
<li class="chapter" data-level="5.1.2" data-path="data-cleanning.html"><a href="data-cleanning.html#csv-comma-seperated-values"><i class="fa fa-check"></i><b>5.1.2</b> CSV: comma seperated values</a></li>
<li class="chapter" data-level="5.1.3" data-path="data-cleanning.html"><a href="data-cleanning.html#tsv-tab-seperated-values"><i class="fa fa-check"></i><b>5.1.3</b> TSV: tab seperated values</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="data-cleanning.html"><a href="data-cleanning.html#tidyverse"><i class="fa fa-check"></i><b>5.2</b> Tidyverse</a><ul>
<li class="chapter" data-level="5.2.1" data-path="data-cleanning.html"><a href="data-cleanning.html#piping"><i class="fa fa-check"></i><b>5.2.1</b> Piping</a></li>
<li class="chapter" data-level="5.2.2" data-path="data-cleanning.html"><a href="data-cleanning.html#mutate-select-and-filter"><i class="fa fa-check"></i><b>5.2.2</b> Mutate, select, and filter</a></li>
<li class="chapter" data-level="5.2.3" data-path="data-cleanning.html"><a href="data-cleanning.html#group-by-and-summarize"><i class="fa fa-check"></i><b>5.2.3</b> Group by and summarize</a></li>
<li class="chapter" data-level="5.2.4" data-path="data-cleanning.html"><a href="data-cleanning.html#wide-to-long-and-back-again-pivot_longer-vs-pivot_wider"><i class="fa fa-check"></i><b>5.2.4</b> Wide to long and back again (pivot_longer vs pivot_wider)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="visualization.html"><a href="visualization.html"><i class="fa fa-check"></i><b>6</b> Visualization</a><ul>
<li class="chapter" data-level="6.1" data-path="visualization.html"><a href="visualization.html#regular-expressions"><i class="fa fa-check"></i><b>6.1</b> Regular expressions</a><ul>
<li class="chapter" data-level="6.1.1" data-path="visualization.html"><a href="visualization.html#r-regexp"><i class="fa fa-check"></i><b>6.1.1</b> R-regexp</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Computational Methods for Environmental Engineers - Course Notes</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="visualization" class="section level1">
<h1><span class="header-section-number">6</span> Visualization</h1>
<p>Part of the <code>tidyverse</code> is the package <code>ggplot2</code> which has so improved plots in R that we aren’t even going to talk about the basic ploting functions and will skip straight to using this package.</p>
<p>In <code>ggplot</code> you start with creating a plot object associated with a specific data set.</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb137-1" data-line-number="1">climateData &lt;-<span class="st"> </span>tibble<span class="op">::</span><span class="kw">tribble</span>(<span class="op">~</span>site, <span class="op">~</span>MAT , <span class="op">~</span>MAP ,</a>
<a class="sourceLine" id="cb137-2" data-line-number="2">                               <span class="st">&#39;Gainesville, FL&#39;</span> , <span class="fl">68.7</span> , <span class="fl">52.0</span>,</a>
<a class="sourceLine" id="cb137-3" data-line-number="3">                               <span class="st">&#39;Lewiston, ME&#39;</span> , <span class="fl">45.1</span> , <span class="fl">44.9</span>,</a>
<a class="sourceLine" id="cb137-4" data-line-number="4">                               <span class="st">&#39;Richland, WA&#39;</span> , <span class="fl">52.9</span> , <span class="fl">7.6</span>,</a>
<a class="sourceLine" id="cb137-5" data-line-number="5">                               <span class="st">&#39;Irvine, CA&#39;</span>, <span class="fl">63.5</span> , <span class="fl">14.4</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb137-6" data-line-number="6"><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="dt">cols=</span><span class="kw">c</span>(<span class="st">&#39;MAT&#39;</span>, <span class="st">&#39;MAP&#39;</span>))</a>
<a class="sourceLine" id="cb137-7" data-line-number="7"></a>
<a class="sourceLine" id="cb137-8" data-line-number="8"><span class="kw">ggplot</span>(<span class="dt">data =</span> climateData)</a></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-31-1.png" width="672" /></p>
<p>This creates an empty plot.
You then need to add different geometries that are mapped using asthetics to the data you used to create the object.
In this case we are creating a histogram.</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb138-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> climateData) <span class="op">+</span></a>
<a class="sourceLine" id="cb138-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> value))</a></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-32-1.png" width="672" /></p>
<p>But for our data that histogram spans two different measurements MAT and MAP.
So we can wrap that in a facet to create subplots.</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb140-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> climateData) <span class="op">+</span></a>
<a class="sourceLine" id="cb140-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> value)) <span class="op">+</span></a>
<a class="sourceLine" id="cb140-3" data-line-number="3"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>name)</a></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-33-1.png" width="672" /></p>
<p>We can also do scatter plots</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb142-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> climateData) <span class="op">+</span></a>
<a class="sourceLine" id="cb142-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x=</span>site, <span class="dt">y=</span>value)) <span class="op">+</span></a>
<a class="sourceLine" id="cb142-3" data-line-number="3"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>name, <span class="dt">nrow=</span><span class="dv">2</span>)</a></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-34-1.png" width="672" /></p>

<div id="regular-expressions" class="section level2">
<h2><span class="header-section-number">6.1</span> Regular expressions</h2>
<p>There is a running joke in data science that all data is text data, so all problems are regular expressions.
There is another joke that if you try to use regular expressions to solve a problem, you now have two problems.</p>
<p>Regular expressions are extremely useful and challenging to use, but the core concept is you have a pattern you want to find in a block of text.
Simple right?</p>
<p>Regular expressions have evolved to a certain standard that is, generally, true across all programming languages, which means that what you learn here you can take with you to Python, Perl, or VBA.
Each of those languages, however do have their own twist and excentricities they put on the patterns.
We’ll talk about the general conventions first, then go over what R does differently, before finally covering the specific functions you can use to get started.</p>
<p>In general, a regular experession will tell you 1) what character, 2) how many times, and 3) where.
Let’s start with the what.</p>
<div id="what-characters" class="section level4">
<h4><span class="header-section-number">6.1.0.1</span> What characters</h4>
<p>Most characters you will work with fall loosly into four categories: digits, letters, white space, and special characters.
Regular expression has special sort cuts for most of these:</p>
<table>
<thead>
<tr class="header">
<th>what</th>
<th>character match</th>
<th>regexp standard</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>digits</td>
<td>[0-9]</td>
<td>\d</td>
</tr>
<tr class="even">
<td>letters (plus numbers and underscore)</td>
<td>[A-Za-z0-9_]</td>
<td>\w</td>
</tr>
<tr class="odd">
<td>white space (including tabs)</td>
<td>[ \t]</td>
<td>\s</td>
</tr>
</tbody>
</table>
<p>Special characters can be matched using the \ followed by the specific character.</p>
<p>You can also use the [ ] to match to a set of characters and the ‘-’ notates all the interviening sequential characters.
For example: ‘[acb]’ will match to either ‘a’ or ‘c’ or ‘b’. Also ‘[a-c]’ will match ‘a’ or ‘b’ or ‘c’.</p>
<p>Note that the period ‘.’ is a wild card and will match any character.
You can also use the ^ within the [ ] to say ‘not’ some character as prefix notation.</p>
</div>
<div id="how-many-times" class="section level4">
<h4><span class="header-section-number">6.1.0.2</span> How many times</h4>
<p>Next you need to say how many times you match that character.
If you leave this unspecified it will match once and only once.</p>
<table>
<thead>
<tr class="header">
<th>how many</th>
<th>post-fix notation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>*</td>
<td>zero or more times</td>
</tr>
<tr class="even">
<td>+</td>
<td>one or more times</td>
</tr>
<tr class="odd">
<td>?</td>
<td>zero or one times</td>
</tr>
</tbody>
</table>
<p>This is used as a post-fix notation, you say what character set you are matching first then you say how many times you are matching it.
For example: ‘c?at’ will match both ‘cat’ and ‘bat’, but it will also match ‘attract’.
Partial matches are valid matches, we are just looking for some part to match the regular expression.</p>
</div>
<div id="where" class="section level4">
<h4><span class="header-section-number">6.1.0.3</span> Where</h4>
<p>Finally where does it match. You can anchor a regular expression to either the start or the end of a string using ‘^’ for the start and ‘$’ for the end.
Yes ‘^’ gets used in two different ways in regular expressions, but it is evaluated in context.
If it is the first character in the pattern, then it archors the rest of the string to the start, otherwise it’s evaluated as a negation.</p>
<p>For example: ‘^c?at’ will still match ‘cat’ and ‘attract’ since the pattern is at the start of the string, but it will not match ‘bat’ since the ‘b’ comes before the pattern.</p>
</div>
<div id="r-regexp" class="section level3">
<h3><span class="header-section-number">6.1.1</span> R-regexp</h3>
<p>R makes things a little tricky by doubling up on the \ for the regexp standard notation. For example: ‘\d’ becomes ‘\\d’.
R also introduces ‘[: :]’ notation for the character set short hands.
You don’t have to use ‘[: :]’ but if you are interested you can read more here [<a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/regex.html" class="uri">https://stat.ethz.ch/R-manual/R-devel/library/base/html/regex.html</a>]](<a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/regex.html" class="uri">https://stat.ethz.ch/R-manual/R-devel/library/base/html/regex.html</a>).</p>
<div id="grepl-does-it-match" class="section level4">
<h4><span class="header-section-number">6.1.1.1</span> grepl: Does it match?</h4>
<p><code>grepl</code> returns <code>TRUE</code> if the provided pattern matches and <code>FALSE</code> if it does not.
This can be useful when applied to an array of characters to see which ones match a pattern and which ones don’t.</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb143-1" data-line-number="1"><span class="kw">grepl</span>(<span class="st">&#39;^c?at&#39;</span>, <span class="kw">c</span>(<span class="st">&#39;cat&#39;</span>, <span class="st">&#39;bat&#39;</span>, <span class="st">&#39;attach&#39;</span>))</a></code></pre></div>
<pre><code>## [1]  TRUE FALSE  TRUE</code></pre>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb145-1" data-line-number="1">data.df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">pet=</span><span class="kw">c</span>(<span class="st">&#39;cat&#39;</span>, <span class="st">&#39;dog&#39;</span>, <span class="st">&#39;dog&#39;</span>, <span class="st">&#39;Cat&#39;</span>),</a>
<a class="sourceLine" id="cb145-2" data-line-number="2">                      <span class="dt">person =</span> <span class="kw">c</span>(<span class="st">&#39;Mars&#39;</span>, <span class="st">&#39;Jes&#39;</span>, <span class="st">&#39;Bill&#39;</span>, <span class="st">&#39;Bill&#39;</span>))</a>
<a class="sourceLine" id="cb145-3" data-line-number="3">data.df[<span class="kw">grepl</span>(<span class="st">&#39;[cC]at&#39;</span>, data.df<span class="op">$</span>pet),] <span class="co">#pull the rows of the cat owners</span></a></code></pre></div>
<pre><code>##   pet person
## 1 cat   Mars
## 4 Cat   Bill</code></pre>
</div>
<div id="gsub-find-and-replace" class="section level4">
<h4><span class="header-section-number">6.1.1.2</span> gsub: Find and replace</h4>
<p><code>gsub</code> will match one pattern and then replace every occurance of that pattern with another string.
This is often times quite useful to strip out unwanted text.</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb147-1" data-line-number="1"><span class="kw">gsub</span>(<span class="st">&#39;[cC]at&#39;</span>, <span class="st">&#39;dog&#39;</span>, <span class="st">&#39;All good cats get tasty cat treats&#39;</span>)</a></code></pre></div>
<pre><code>## [1] &quot;All good dogs get tasty dog treats&quot;</code></pre>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb149-1" data-line-number="1"><span class="kw">gsub</span>(<span class="st">&#39;</span><span class="ch">\\</span><span class="st">s*</span><span class="ch">\\</span><span class="st">d+$&#39;</span>, <span class="st">&#39;&#39;</span>, <span class="kw">c</span>(<span class="st">&#39;March 2&#39;</span>, <span class="st">&#39;April 3&#39;</span>, <span class="st">&#39;May 13&#39;</span>, <span class="st">&#39;2020 Feb   29&#39;</span>))</a></code></pre></div>
<pre><code>## [1] &quot;March&quot;    &quot;April&quot;    &quot;May&quot;      &quot;2020 Feb&quot;</code></pre>
</div>
<div id="regmatches-find-and-copy" class="section level4">
<h4><span class="header-section-number">6.1.1.3</span> regmatches: Find and copy</h4>
<p>Finally <code>regmatches</code> will pull sections of the string that match a certain pattern.
Note that this could be zero or more matches so regmatches will return a list of matches.</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb151-1" data-line-number="1"><span class="kw">regmatches</span>(<span class="kw">c</span>(<span class="st">&#39;March 2&#39;</span>, <span class="st">&#39;April 3&#39;</span>, <span class="st">&#39;May 13&#39;</span>, <span class="st">&#39;2020 Feb   29&#39;</span>), <span class="kw">gregexpr</span>(<span class="st">&#39;</span><span class="ch">\\</span><span class="st">d+$&#39;</span>, <span class="kw">c</span>(<span class="st">&#39;March 2&#39;</span>, <span class="st">&#39;April 3&#39;</span>, <span class="st">&#39;May 13&#39;</span>, <span class="st">&#39;2020 Feb   29&#39;</span>)))</a></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;2&quot;
## 
## [[2]]
## [1] &quot;3&quot;
## 
## [[3]]
## [1] &quot;13&quot;
## 
## [[4]]
## [1] &quot;29&quot;</code></pre>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb153-1" data-line-number="1"><span class="kw">regmatches</span>(<span class="kw">c</span>(<span class="st">&#39;March 2&#39;</span>, <span class="st">&#39;April 3&#39;</span>, <span class="st">&#39;May 13&#39;</span>, <span class="st">&#39;2020 Feb   29&#39;</span>), <span class="kw">gregexpr</span>(<span class="st">&#39;</span><span class="ch">\\</span><span class="st">d+&#39;</span>, <span class="kw">c</span>(<span class="st">&#39;March 2&#39;</span>, <span class="st">&#39;April 3&#39;</span>, <span class="st">&#39;May 13&#39;</span>, <span class="st">&#39;2020 Feb   29&#39;</span>)))</a></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;2&quot;
## 
## [[2]]
## [1] &quot;3&quot;
## 
## [[3]]
## [1] &quot;13&quot;
## 
## [[4]]
## [1] &quot;2020&quot; &quot;29&quot;</code></pre>
</div>
<div id="splits-and-subsets" class="section level4">
<h4><span class="header-section-number">6.1.1.4</span> splits and subsets</h4>
<p>If your pattern is based on the character position instead of a regular expression you are in luck!
<code>subset</code> takes a character set, a start index, and a stop index, then returns the trimmed character set for you.</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb155-1" data-line-number="1"><span class="kw">substr</span>(<span class="kw">c</span>(<span class="st">&#39;2020-03-03&#39;</span>, <span class="st">&#39;2019-04-02&#39;</span>), <span class="dv">1</span>, <span class="dv">4</span>)</a></code></pre></div>
<pre><code>## [1] &quot;2020&quot; &quot;2019&quot;</code></pre>
<p>Other times you want to slip a string on a specific character</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb157-1" data-line-number="1"><span class="kw">strsplit</span>(<span class="kw">c</span>(<span class="st">&#39;2020-03-03&#39;</span>, <span class="st">&#39;2019-04-02&#39;</span>), <span class="dt">split =</span> <span class="st">&#39;-&#39;</span>)</a></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;2020&quot; &quot;03&quot;   &quot;03&quot;  
## 
## [[2]]
## [1] &quot;2019&quot; &quot;04&quot;   &quot;02&quot;</code></pre>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-cleanning.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
